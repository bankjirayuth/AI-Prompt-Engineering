<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>AI Prompt Engineering - Presentation</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Kanit:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        width: 100%;
        height: 100%;
        background-color: #0f172a;
        overflow: hidden;
        font-family: "Inter", sans-serif;
      }

      .presentation-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #0f172a;
      }

      .slide-scaler {
        width: 1280px;
        height: 720px;
        position: relative;
        transform-origin: center center;
      }

      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        visibility: hidden;
        transition:
          opacity 0.4s ease-in-out,
          visibility 0.4s ease-in-out;
      }

      .slide.active {
        opacity: 1;
        visibility: visible;
      }

      .slide iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      /* Navigation Controls */
      .nav-controls {
        position: fixed;
        bottom: 12px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 1000;
        background: rgba(30, 41, 59, 0.6);
        backdrop-filter: blur(8px);
        padding: 6px 14px;
        border-radius: 30px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        opacity: 0.4;
        transition: opacity 0.3s ease;
      }

      .nav-controls:hover {
        opacity: 1;
      }

      .nav-btn {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: rgba(59, 130, 246, 0.15);
        border: 1px solid rgba(59, 130, 246, 0.3);
        color: #60a5fa;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        font-size: 12px;
      }

      .nav-btn:hover {
        background: rgba(59, 130, 246, 0.4);
        transform: scale(1.1);
      }

      .nav-btn:active {
        transform: scale(0.95);
      }

      .nav-btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
        transform: none;
      }

      .slide-counter {
        background: rgba(16, 185, 129, 0.15);
        color: #10b981;
        padding: 2px 8px;
        border-radius: 12px;
        font-weight: bold;
        font-family: "JetBrains Mono", monospace;
        font-size: 10px;
      }

      /* Progress bar */
      .progress-bar {
        position: fixed;
        top: 0;
        left: 0;
        height: 4px;
        background: linear-gradient(90deg, #3b82f6, #10b981);
        transition: width 0.3s ease;
        z-index: 1000;
      }

      /* Keyboard hints */
      .keyboard-hint {
        position: fixed;
        top: 15px;
        right: 15px;
        background: rgba(30, 41, 59, 0.9);
        backdrop-filter: blur(10px);
        padding: 8px 14px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #64748b;
        font-size: 11px;
        font-family: "JetBrains Mono", monospace;
        z-index: 1000;
        opacity: 0.6;
        transition: opacity 0.3s ease;
      }

      .keyboard-hint:hover {
        opacity: 1;
      }

      .keyboard-hint kbd {
        background: rgba(255, 255, 255, 0.1);
        padding: 2px 6px;
        border-radius: 3px;
        margin: 0 2px;
      }

      /* Slide dots */
      .slide-dots {
        display: flex;
        gap: 3px;
      }

      .slide-dot {
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: rgba(148, 163, 184, 0.3);
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .slide-dot:hover {
        background: rgba(148, 163, 184, 0.6);
      }

      .slide-dot.active {
        background: #10b981;
        width: 12px;
        border-radius: 2px;
      }

      /* Fullscreen button */
      .fullscreen-btn {
        position: fixed;
        top: 15px;
        right: 15px;
        background: rgba(30, 41, 59, 0.9);
        backdrop-filter: blur(10px);
        padding: 8px 14px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #64748b;
        font-size: 12px;
        font-family: "JetBrains Mono", monospace;
        z-index: 1000;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .fullscreen-btn:hover {
        background: rgba(59, 130, 246, 0.3);
        color: #60a5fa;
      }
    </style>
  </head>
  <body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- Fullscreen Button -->
    <button
      class="fullscreen-btn"
      id="fullscreenBtn"
      title="กด F11 หรือคลิกเพื่อ Fullscreen"
    >
      <i class="fas fa-expand"></i> Fullscreen
    </button>



    <!-- Presentation Wrapper -->
    <div class="presentation-wrapper">
      <div class="slide-scaler" id="slideScaler">
        <div class="slide active" data-slide="1">
          <iframe src="1.html"></iframe>
        </div>
        <div class="slide" data-slide="2">
          <iframe src="outline.html"></iframe>
        </div>
        <div class="slide" data-slide="3">
          <iframe src="2.html"></iframe>
        </div>
        <div class="slide" data-slide="4">
          <iframe src="3.html"></iframe>
        </div>
        <div class="slide" data-slide="5">
          <iframe src="4.html"></iframe>
        </div>
        <div class="slide" data-slide="6">
          <iframe src="4a.html"></iframe>
        </div>
        <div class="slide" data-slide="7">
          <iframe src="4b.html"></iframe>
        </div>
        <div class="slide" data-slide="8">
          <iframe src="5.html"></iframe>
        </div>
        <div class="slide" data-slide="9">
          <iframe src="5a.html"></iframe>
        </div>
        <div class="slide" data-slide="10">
          <iframe src="6.html"></iframe>
        </div>
        <div class="slide" data-slide="11">
          <iframe src="6a.html"></iframe>
        </div>
        <div class="slide" data-slide="12">
          <iframe src="7.html"></iframe>
        </div>
        <div class="slide" data-slide="13">
          <iframe src="7a.html"></iframe>
        </div>
        <div class="slide" data-slide="14">
          <iframe src="8.html"></iframe>
        </div>
        <div class="slide" data-slide="15">
          <iframe src="9.html"></iframe>
        </div>
        <div class="slide" data-slide="16">
          <iframe src="10.html"></iframe>
        </div>
        <div class="slide" data-slide="17">
          <iframe src="11.html"></iframe>
        </div>
        <div class="slide" data-slide="18">
          <iframe src="12.html"></iframe>
        </div>
        <div class="slide" data-slide="19">
          <iframe src="13.html"></iframe>
        </div>
        <div class="slide" data-slide="20">
          <iframe src="14.html"></iframe>
        </div>
      </div>
    </div>

    <!-- Navigation Controls -->
    <div class="nav-controls">
      <button class="nav-btn" id="prevBtn" title="Previous Slide (←)">
        <i class="fas fa-chevron-left"></i>
      </button>

      <div class="slide-dots" id="slideDots"></div>

      <div class="slide-counter">
        <span id="currentSlide">1</span> / <span id="totalSlides">20</span>
      </div>

      <button class="nav-btn" id="nextBtn" title="Next Slide (→)">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <script>
      const slides = document.querySelectorAll(".slide");
      const totalSlides = slides.length;
      let currentSlide = 1;

      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const currentSlideEl = document.getElementById("currentSlide");
      const progressBar = document.getElementById("progressBar");
      const slideDots = document.getElementById("slideDots");
      const slideScaler = document.getElementById("slideScaler");
      const fullscreenBtn = document.getElementById("fullscreenBtn");

      // Slide dimensions (original)
      const SLIDE_WIDTH = 1280;
      const SLIDE_HEIGHT = 720;

      // Scale slides to fit viewport
      function scaleSlides() {
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;

        // Calculate scale to fit while maintaining aspect ratio
        const scaleX = windowWidth / SLIDE_WIDTH;
        const scaleY = windowHeight / SLIDE_HEIGHT;
        const scale = Math.min(scaleX, scaleY);

        slideScaler.style.transform = `scale(${scale})`;
      }

      // Create dots
      for (let i = 1; i <= totalSlides; i++) {
        const dot = document.createElement("div");
        dot.className = "slide-dot" + (i === 1 ? " active" : "");
        dot.dataset.slide = i;
        dot.addEventListener("click", () => goToSlide(i));
        slideDots.appendChild(dot);
      }

      function updateSlide() {
        slides.forEach((slide, index) => {
          if (index + 1 === currentSlide) {
            slide.classList.add("active");
          } else {
            slide.classList.remove("active");
          }
        });

        // Update counter
        currentSlideEl.textContent = currentSlide;

        // Update progress bar
        const progress = (currentSlide / totalSlides) * 100;
        progressBar.style.width = progress + "%";

        // Update dots
        document.querySelectorAll(".slide-dot").forEach((dot, index) => {
          if (index + 1 === currentSlide) {
            dot.classList.add("active");
          } else {
            dot.classList.remove("active");
          }
        });

        // Update button states
        prevBtn.disabled = currentSlide === 1;
        nextBtn.disabled = currentSlide === totalSlides;
      }

      function goToSlide(slideNum) {
        if (slideNum >= 1 && slideNum <= totalSlides) {
          currentSlide = slideNum;
          updateSlide();
        }
      }

      function nextSlide() {
        if (currentSlide < totalSlides) {
          currentSlide++;
          updateSlide();
        }
      }

      function prevSlide() {
        if (currentSlide > 1) {
          currentSlide--;
          updateSlide();
        }
      }

      function toggleFullscreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen().catch((err) => {
            console.log("Fullscreen error:", err);
          });
        } else {
          document.exitFullscreen();
        }
      }

      // Button event listeners
      prevBtn.addEventListener("click", prevSlide);
      nextBtn.addEventListener("click", nextSlide);
      fullscreenBtn.addEventListener("click", toggleFullscreen);

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        switch (e.key) {
          case "ArrowRight":
          case "PageDown":
          case " ":
            e.preventDefault();
            nextSlide();
            break;
          case "ArrowLeft":
          case "PageUp":
            e.preventDefault();
            prevSlide();
            break;
          case "Home":
            e.preventDefault();
            goToSlide(1);
            break;
          case "End":
            e.preventDefault();
            goToSlide(totalSlides);
            break;
          case "f":
          case "F":
            e.preventDefault();
            toggleFullscreen();
            break;
        }
      });

      // Resize handler
      window.addEventListener("resize", scaleSlides);
      window.addEventListener("load", scaleSlides);
      document.addEventListener("fullscreenchange", () => {
        setTimeout(scaleSlides, 100);
      });

      // Prevent iframes from capturing focus
      document.querySelectorAll("iframe").forEach((iframe) => {
        iframe.setAttribute("tabindex", "-1");
      });

      // Click anywhere to focus main document (for keyboard navigation)
      document.body.addEventListener("click", () => {
        document.body.focus();
      });

      // Set focus on body for keyboard events
      document.body.setAttribute("tabindex", "0");
      document.body.focus();

      // Initialize
      scaleSlides();
      updateSlide();

      // ===== REVEAL SOLUTION FEATURE =====
      const workshopSlides = [8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20];
      const revealSolutionBtn = document.getElementById("revealSolutionBtn");
      const revealedSlides = new Set();

      function isWorkshopSlide() {
        return workshopSlides.includes(currentSlide);
      }

      function updateRevealButton() {
        if (isWorkshopSlide() && !revealedSlides.has(currentSlide)) {
          revealSolutionBtn.classList.add("visible");
          revealSolutionBtn.classList.remove("hidden-solution");
          revealSolutionBtn.innerHTML =
            '<i class="fas fa-eye"></i> กด S เพื่อดูเฉลย';
        } else if (isWorkshopSlide() && revealedSlides.has(currentSlide)) {
          revealSolutionBtn.classList.add("visible", "hidden-solution");
          revealSolutionBtn.innerHTML =
            '<i class="fas fa-eye-slash"></i> เฉลยแสดงแล้ว';
        } else {
          revealSolutionBtn.classList.remove("visible", "hidden-solution");
        }
      }

      function revealSolution() {
        if (!isWorkshopSlide()) return;
        if (revealedSlides.has(currentSlide)) return;

        const activeSlide = document.querySelector(
          `.slide[data-slide="${currentSlide}"]`,
        );
        if (!activeSlide) return;

        const iframe = activeSlide.querySelector("iframe");
        if (!iframe) return;

        // Try postMessage first
        try {
          iframe.contentWindow.postMessage("revealSolution", "*");
        } catch (e) {
          console.log("postMessage failed:", e);
        }

        // Also try direct access for same-origin
        try {
          const iframeDoc =
            iframe.contentDocument || iframe.contentWindow.document;
          if (iframeDoc) {
            const solutionContent = iframeDoc.getElementById("solutionContent");
            const solutionOverlay = iframeDoc.getElementById("solutionOverlay");
            if (solutionContent) solutionContent.classList.add("revealed");
            if (solutionOverlay) solutionOverlay.classList.add("hidden");
          }
        } catch (e) {
          console.log("Direct access failed:", e);
        }

        revealedSlides.add(currentSlide);
        updateRevealButton();
      }

      // Button click handler
      revealSolutionBtn.addEventListener("click", revealSolution);

      // Add S key handler
      document.addEventListener("keydown", (e) => {
        if (e.key === "s" || e.key === "S") {
          e.preventDefault();
          revealSolution();
        }
      });

      // Override updateSlide to also update reveal button
      const originalUpdateSlide = updateSlide;
      updateSlide = function () {
        originalUpdateSlide.call(this);
        setTimeout(updateRevealButton, 100);
      };

      // Initial update after iframes load
      window.addEventListener("load", () => {
        setTimeout(updateRevealButton, 500);
      });
    </script>
  </body>
</html>
